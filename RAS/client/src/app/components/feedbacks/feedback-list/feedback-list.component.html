<p-dataTable [value]="students" [editable]="true" resizableColumns="true" reorderableColumns="true"
             scrollable="true">
  <p-column header="Name" [editable]="false" [filter]="true" [sortable]="true" [style]="{'width':'10em'}">
    <ng-template let-col let-student="rowData" pTemplate="body">
       <span>
          <a (click)="onStudentClick(student)"> {{student.user.firstName +" "+ student.user.lastName}}</a>
       </span>
    </ng-template>
  </p-column>
  <p-column [style]="{'width':'10em'}">
    <ng-template let-col let-student="rowData" pTemplate="body">
       <span>
          <a (click)="onOverallClick(student)">Overall feedback</a>
       </span>
    </ng-template>
  </p-column>
  <p-column [style]="{'width':'10em'}">
    <ng-template let-col let-student="rowData" pTemplate="body">
      <span>
          <a (click)="onProvideClick(student)">Provide feedback</a>
      </span>
    </ng-template>
  </p-column>

  <p-column header="Learning ability" field="teacherFeedback.learningAbility.name" [filter]="true" [sortable]="true"
            [style]="{'width':'10em'}"></p-column>
  <p-column header="Overall technical competence" field="teacherFeedback.overallTechnicalCompetence.name"
            [filter]="true" [sortable]="true" [style]="{'width':'10em'}"></p-column>
  <p-column header="Passional initiative" field="teacherFeedback.passionalInitiative.name" [filter]="true"
            [sortable]="true" [style]="{'width':'10em'}"></p-column>
  <p-column header="Team work" field="teacherFeedback.teamWork.name" [filter]="true" [sortable]="true"
            [style]="{'width':'10em'}"></p-column>
  <p-column header="Getting things done" field="teacherFeedback.gettingThingsDone.name" [filter]="true"
            [sortable]="true" [style]="{'width':'10em'}"></p-column>
  <p-column header="Active Communicator" field="teacherFeedback.activeCommunicator.name" [filter]="true"
            [sortable]="true" [style]="{'width':'10em'}"></p-column>
  <p-column header="Summary" field="teacherFeedback.summary" [filter]="true" [sortable]="true"
            [style]="{'width':'10em'}"></p-column>

  <p-column header="Learning ability" field="expertFeedback.learningAbility.name" [filter]="true" [sortable]="true"
            [style]="{'width':'10em'}"></p-column>
  <p-column header="Overall technical competence" field="expertFeedback.overallTechnicalCompetence.name" [filter]="true"
            [sortable]="true" [style]="{'width':'10em'}"></p-column>
  <p-column header="Passional initiative" field="expertFeedback.passionalInitiative.name" [filter]="true"
            [sortable]="true" [style]="{'width':'10em'}"></p-column>
  <p-column header="Team work" field="expertFeedback.teamWork.name" [filter]="true" [sortable]="true"
            [style]="{'width':'10em'}"></p-column>
  <p-column header="Getting things done" field="expertFeedback.gettingThingsDone.name" [filter]="true" [sortable]="true"
            [style]="{'width':'10em'}"></p-column>
  <p-column header="Active Communicator" field="expertFeedback.activeCommunicator.name" [filter]="true"
            [sortable]="true" [style]="{'width':'10em'}"></p-column>
  <p-column header="Summary" field="expertFeedback.summary" [filter]="true" [sortable]="true"
            [style]="{'width':'10em'}"></p-column>

  <p-column header="HR Comment" [filter]="true" [sortable]="true" [style]="{'width':'10em'}"></p-column>

  <p-column header="Interviewer Comment" field="data.interviewerComment" [filter]="true" [sortable]="true"
            [style]="{'width':'10em'}"></p-column>
  <p-column header="Intern. Test, Base" field="data.intermBase" [filter]="true" [sortable]="true"
            [style]="{'width':'10em'}"></p-column>
  <p-column header="Intern. Test, Lang" field="data.intermLang" [filter]="true" [sortable]="true"
            [style]="{'width':'10em'}"></p-column>
  <p-column header="Final, Lang" field="data.finalBase" [filter]="true" [sortable]="true"
            [style]="{'width':'10em'}"></p-column>
  <p-column header="Final, Base" field="data.finalLang" [filter]="true" [sortable]="true"
            [style]="{'width':'10em'}"></p-column>
  <p-column header="Teacher Scope" field="data.teacherScore" [filter]="true" [sortable]="true"
            [style]="{'width':'10em'}"></p-column>

  <p-column header="Contact Date" [filter]="true" [sortable]="true" [style]="{'width':'10em'}"></p-column>
  <p-column header="Contact Comment" [filter]="true" [sortable]="true" [style]="{'width':'10em'}"></p-column>
</p-dataTable>

<p-dialog header="User info" [(visible)]="displayStudentDetails" modal="modal" width="450">
  <div class="ui-g">
    <div class="ui-g-12">
      <h4>Personal Information:</h4>
      <div class="ui-g-4">
        <div>Id:</div>
        <div>Name:</div>
        <div>Age:</div>
        <div>Education:</div>
        <div>Strong Skills:</div>
      </div>
      <div class="ui-g-8" *ngIf="selectedStudent && selectedStudent.user">
        <div>{{selectedStudent.user.id}}</div>
        <div>{{selectedStudent.user.firstName +" "+ selectedStudent.user.lastName}}</div>
        <div>{{selectedStudent.age}}-</div>
        <div>{{selectedStudent.education}}-</div>
        <div>{{selectedStudent.strongSkills}}-</div>
      </div>
    </div>

    <div class="ui-g-12">
      <h4>Contact Information:</h4>
      <div class="ui-g-4">
        <div>Email:</div>
        <div>Messenger:</div>
        <div>Phone:</div>
        <div>Place Of Origin:</div>
      </div>
      <div class="ui-g-8" *ngIf="selectedStudent && selectedStudent.user">
        <div>{{selectedStudent.user.email}}</div>
        <div>{{selectedStudent.messenger}}-</div>
        <div>{{selectedStudent.user.phone}}</div>
        <div>{{selectedStudent.placeOfOrigin}}-</div>
      </div>
    </div>
  </div>
</p-dialog>

<p-dialog header="Student Overall Feedback" [(visible)]="displayOverallFeedback" modal="modal" width="800">
  <div class="ui-g">
    <div class="ui-g-12">
      <div *ngIf="selectedStudent && selectedStudent.user"><h4>{{selectedStudent.user.firstName +" "+
        selectedStudent.user.lastName}}</h4></div>
      <div class="ui-g-4">
        <div class="column">
          <div>English level by SSU:</div>
          <div>Intern. Test, Base:</div>
          <div>Intern. Test, Lang:</div>
          <div>Final, Lang:</div>
          <div>Final, Base:</div>
          <div>Teacher Scope:</div>
          <div>Teacher(s):</div>
          <div>Expert(s):</div>
        </div>
      </div>
      <div class="ui-g-8">
        <div class="column" *ngIf="selectedStudent && selectedStudent.user">
          <div *ngIf="selectedStudent.data.englishLevel">{{selectedStudent.data.englishLevel.name}}</div>
          <div *ngIf="selectedStudent.data.intermBase">{{selectedStudent.data.intermBase}}</div>
          <div *ngIf="selectedStudent.data.intermLang">{{selectedStudent.data.intermLang}}</div>
          <div *ngIf="selectedStudent.data.finalBase">{{selectedStudent.data.finalBase}}</div>
          <div *ngIf="selectedStudent.data.finalLang">{{selectedStudent.data.finalLang}}</div>
          <div *ngIf="selectedStudent.data.teacherScore">{{selectedStudent.data.teacherScore}}</div>
          <div>-</div>
          <div>-</div>
        </div>
      </div>
    </div>

    <div class="ui-g-12" *ngIf="selectedStudent && selectedStudent.user">
      <div class="ui-g-12">
        <div class="ui-g-4">Characteristic</div>
        <div class="ui-g-4">Teacher</div>
        <div class="ui-g-4">Expert</div>
      </div>

      <div>Technical Result</div>
      <div class="ui-g-12">
        <div class="ui-g-4">
          <div>Learning ability:</div>
          <div>Overall technical competence:</div>
        </div>
        <div class="ui-g-4">
          <div *ngIf="selectedStudent.teacherFeedback.learningAbility != null">
            {{selectedStudent.teacherFeedback.learningAbility.name}}
          </div>
          <div *ngIf="selectedStudent.teacherFeedback.overallTechnicalCompetence != null">
            {{selectedStudent.teacherFeedback.overallTechnicalCompetence.name}}
          </div>
        </div>
        <div class="ui-g-4">
          <div *ngIf="selectedStudent.expertFeedback.learningAbility != null">
            {{selectedStudent.expertFeedback.learningAbility.name}}
          </div>
          <div *ngIf="selectedStudent.expertFeedback.overallTechnicalCompetence != null">
            {{selectedStudent.expertFeedback.overallTechnicalCompetence.name}}
          </div>
        </div>
      </div>

      <div>Soft Skills</div>
      <div class="ui-g-12">
        <div class="ui-g-4">
          <div>Passional initiative:</div>
          <div>Team work:</div>
          <div>Getting things done:</div>
          <div>Active Communicator:</div>
        </div>
        <div class="ui-g-4">
          <div *ngIf="selectedStudent.teacherFeedback.passionalInitiative != null">
            {{selectedStudent.teacherFeedback.passionalInitiative.name}}
          </div>
          <div *ngIf="selectedStudent.teacherFeedback.teamWork != null">
            {{selectedStudent.teacherFeedback.teamWork.name}}
          </div>
          <div *ngIf="selectedStudent.teacherFeedback.gettingThingsDone != null">
            {{selectedStudent.teacherFeedback.gettingThingsDone.name}}
          </div>
          <div *ngIf="selectedStudent.teacherFeedback.activeCommunicator != null">
            {{selectedStudent.teacherFeedback.activeCommunicator.name}}
          </div>
        </div>
        <div class="ui-g-4">
          <div *ngIf="selectedStudent.expertFeedback.passionalInitiative != null">
            {{selectedStudent.expertFeedback.passionalInitiative.name}}
          </div>
          <div *ngIf="selectedStudent.expertFeedback.teamWork != null">
            {{selectedStudent.expertFeedback.teamWork.name}}
          </div>
          <div *ngIf="selectedStudent.expertFeedback.gettingThingsDone != null">
            {{selectedStudent.expertFeedback.gettingThingsDone.name}}
          </div>
          <div *ngIf="selectedStudent.expertFeedback.activeCommunicator != null">
            {{selectedStudent.expertFeedback.activeCommunicator.name}}
          </div>
        </div>
      </div>

      <div>Summary</div>
      <div class="ui-g-12">
        <div class="ui-g-4">
          <div>Summary comments (risks/strangths, recommendation):</div>
        </div>
        <div class="ui-g-4">
          <div *ngIf="selectedStudent.teacherFeedback.summary != null">{{selectedStudent.teacherFeedback.summary}}</div>
        </div>
        <div class="ui-g-4">
          <div *ngIf="selectedStudent.teacherFeedback.summary != null">{{selectedStudent.expertFeedback.summary}}</div>
        </div>
      </div>

      <div class="ui-g-12">
        <div class="ui-g-4">
          <div>HR Comment:</div>
        </div>
        <div class="ui-g-8">
          <div></div>
        </div>
      </div>

      <div class="ui-g-12">
        <div class="ui-g-4">
          <div>Interviewer Comment:</div>
        </div>
        <div class="ui-g-8" *ngIf="selectedStudent.data != null">
          <div>{{selectedStudent.data.interviewerComment}}</div>
        </div>
      </div>
    </div>
  </div>
</p-dialog>

<p-dialog header="Student Provide Feedback" [(visible)]="displayProvideFeedback" modal="modal" width="1200">
  <div *ngIf="selectedStudent && selectedStudent.user">
    <h4>{{selectedStudent.user.firstName +" "+ selectedStudent.user.lastName}}</h4>
  </div>
  <nav mat-tab-nav-bar>
    <a mat-tab-link (click)="onClickTeacher()">Teacher</a>
    <a mat-tab-link (click)="onClickExpert()">Expert</a>
    <a mat-tab-link (click)="onClickInterviewer()">Interviewer</a>
  </nav>
  <div class="ui-g-12">
    <div class="container well" *ngIf="selectedStudent && selectedStudent.user && displayTeacherFeedback">
      <form [formGroup]="signupTeacherForm" (ngSubmit)="onSave()">
        <div class="row">
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-2 form-group">
                <label>Learning ability</label>
              </div>
              <div class="col-sm-3 form-group">
                <select
                  class="form-control input-sm"
                  formControlName="learningAbilityTeacher"
                  (change)="onChoose()">
                  <option *ngFor="let mark of marks | markFilter:CharId.ONE" [value]="mark.id">{{mark.name}}</option>
                </select>
              </div>
              <div class="col-sm-7 form-group">
                {{learnDescTeacher}}
              </div>
            </div>

            <div class="row">
              <div class="col-sm-2 form-group">
                <label>Overall technical competence</label>
              </div>
              <div class="col-sm-3 form-group">
                <select
                  class="form-control input-sm"
                  formControlName="overallTechCompetenceTeacher"
                  (change)="onChoose()">
                  <option *ngFor="let mark of marks | markFilter:CharId.TWO" [value]="mark.id">{{mark.name}}</option>
                </select>
              </div>
              <div class="col-sm-7 form-group">
                {{overallDescTeacher}}
              </div>
            </div>

            <div class="row">
              <div class="col-sm-2 form-group">
                <label>Passional initiative</label>
              </div>
              <div class="col-sm-3 form-group">
                <select
                  class="form-control input-sm"
                  formControlName="passionalInitiativeTeacher"
                  (change)="onChoose()">
                  <option *ngFor="let mark of marks | markFilter:CharId.THREE" [value]="mark.id">{{mark.name}}</option>
                </select>
              </div>
              <div class="col-sm-7 form-group">
                {{passDescTeacher}}
              </div>
            </div>

            <div class="row">
              <div class="col-sm-2 form-group">
                <label>Team work</label>
              </div>
              <div class="col-sm-3 form-group">
                <select
                  class="form-control input-sm"
                  formControlName="teamWorkTeacher"
                  (change)="onChoose()">
                  <option *ngFor="let mark of marks | markFilter:CharId.FOUR" [value]="mark.id">{{mark.name}}</option>
                </select>
              </div>
              <div class="col-sm-7 form-group">
                {{teamDescTeacher}}
              </div>
            </div>

            <div class="row">
              <div class="col-sm-2 form-group">
                <label>Getting things done</label>
              </div>
              <div class="col-sm-3 form-group">
                <select
                  class="form-control input-sm"
                  formControlName="getThingsDoneTeacher"
                  (change)="onChoose()">
                  <option *ngFor="let mark of marks | markFilter:CharId.FIVE" [value]="mark.id">{{mark.name}}</option>
                </select>
              </div>
              <div class="col-sm-7 form-group">
                {{getDescTeacher}}
              </div>
            </div>

            <div class="row">
              <div class="col-sm-2 form-group">
                <label>Active Communicator</label>
              </div>
              <div class="col-sm-3 form-group">
                <select
                  class="form-control input-sm"
                  formControlName="activeCommunicatorTeacher"
                  (change)="onChoose()"
                >
                  <option *ngFor="let mark of marks | markFilter:CharId.SIX" [value]="mark.id">{{mark.name}}</option>
                </select>
              </div>
              <div class="col-sm-7 form-group">
                {{actDescTeacher}}
              </div>
            </div>

            <div class="row">
              <div class="col-sm-2 form-group">
                <label>Summary</label>
              </div>
              <div class="col-sm-10 form-group">
                <input
                  type="text"
                  class="form-control input-sm"
                  formControlName="summaryTeacher">
              </div>
            </div>
          </div>
        </div>
        <button class="btn btn-primary" type="submit">Save Feedback</button>
      </form>
    </div>
    <div class="container well" *ngIf="selectedStudent && selectedStudent.user && displayExpertFeedback">
      <form [formGroup]="signupExpertForm" (ngSubmit)="onSave()">
        <div class="row">
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-2 form-group">
                <label>Learning ability</label>
              </div>
              <div class="col-sm-3 form-group">
                <select
                  class="form-control input-sm"
                  formControlName="learningAbilityExpert"
                  (change)="onChoose()">
                  <option *ngFor="let mark of marks | markFilter:CharId.ONE" [value]="mark.id">{{mark.name}}</option>
                </select>
              </div>
              <div class="col-sm-7 form-group">
                {{learnDescExpert}}
              </div>
            </div>

            <div class="row">
              <div class="col-sm-2 form-group">
                <label>Overall technical competence</label>
              </div>
              <div class="col-sm-3 form-group">
                <select
                  class="form-control input-sm"
                  formControlName="overallTechCompetenceExpert"
                  (change)="onChoose()">
                  <option *ngFor="let mark of marks | markFilter:CharId.TWO" [value]="mark.id">{{mark.name}}</option>
                </select>
              </div>
              <div class="col-sm-7 form-group">
                {{overallDescExpert}}
              </div>
            </div>

            <div class="row">
              <div class="col-sm-2 form-group">
                <label>Passional initiative</label>
              </div>
              <div class="col-sm-3 form-group">
                <select
                  class="form-control input-sm"
                  formControlName="passionalInitiativeExpert"
                  (change)="onChoose()">
                  <option *ngFor="let mark of marks | markFilter:CharId.THREE" [value]="mark.id">{{mark.name}}</option>
                </select>
              </div>
              <div class="col-sm-7 form-group">
                {{passDescExpert}}
              </div>
            </div>

            <div class="row">
              <div class="col-sm-2 form-group">
                <label>Team work</label>
              </div>
              <div class="col-sm-3 form-group">
                <select
                  class="form-control input-sm"
                  formControlName="teamWorkExpert"
                  (change)="onChoose()">
                  <option *ngFor="let mark of marks | markFilter:CharId.FOUR" [value]="mark.id">{{mark.name}}</option>
                </select>
              </div>
              <div class="col-sm-7 form-group">
                {{teamDescExpert}}
              </div>
            </div>

            <div class="row">
              <div class="col-sm-2 form-group">
                <label>Getting things done</label>
              </div>
              <div class="col-sm-3 form-group">
                <select
                  class="form-control input-sm"
                  formControlName="getThingsDoneExpert"
                  (change)="onChoose()">
                  <option *ngFor="let mark of marks | markFilter:CharId.FIVE" [value]="mark.id">{{mark.name}}</option>
                </select>
              </div>
              <div class="col-sm-7 form-group">
                {{getDescExpert}}
              </div>
            </div>

            <div class="row">
              <div class="col-sm-2 form-group">
                <label>Active Communicator</label>
              </div>
              <div class="col-sm-3 form-group">
                <select
                  class="form-control input-sm"
                  formControlName="activeCommunicatorExpert"
                  (change)="onChoose()"
                >
                  <option *ngFor="let mark of marks | markFilter:CharId.SIX" [value]="mark.id">{{mark.name}}</option>
                </select>
              </div>
              <div class="col-sm-7 form-group">
                {{actDescExpert}}
              </div>
            </div>

            <div class="row">
              <div class="col-sm-2 form-group">
                <label>Summary</label>
              </div>
              <div class="col-sm-10 form-group">
                <input
                  type="text"
                  class="form-control input-sm"
                  formControlName="summaryExpert">
              </div>
            </div>
          </div>
        </div>
        <button class="btn btn-primary" type="submit">Save Feedback</button>
      </form>
    </div>
    <div class="container well" *ngIf="selectedStudent && selectedStudent.user && displayInterFeedback">
      <form [formGroup]="signupInterForm" (ngSubmit)="onSave()">
        <div class="row">
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-2 form-group">
                <label>Summary</label>
              </div>
              <div class="col-sm-10 form-group">
                <input
                  type="text"
                  class="form-control input-sm"
                  formControlName="summary">
              </div>
            </div>
          </div>
        </div>
        <button class="btn btn-primary" type="submit">Save Feedback</button>
      </form>
    </div>
  </div>
</p-dialog>

